{% extends "base.html" %}

{% block content %}
<div class="container">
  <div class="search-container">
    <form>
      <input type="search" placeholder="Search text or #tags.." name="q" value="{{search_query}}"></input>
      <button type="submit">Search</button>
    </form>
  </div>
  {% for bookmark in bookmarks %}
  <div class="bookmark">
    <div class="bookmark-header">
      <a href="{{bookmark.url}}">{{bookmark.title}}</a>
    </div>
    <div class="bookmark-description">
      <p>{{bookmark.description}}</p>
    </div>
    {% if bookmark.tags %}
    <div class="bookmark-tags">
      {% for tag in bookmark.tags %}
      {% if tag.strip() %}
      <a href="/?q=%23{{tag}}" class="tag-link">{{tag}}</a>{% if not loop.last %} â€¢ {% endif %}
      {% endif %}
      {% endfor %}
    </div>
    {% endif %}
    <div class="bookmark-timestamp">
      <p>{{bookmark.date_added | timeago}}<a href="/bookmarks/{{bookmark.id}}/edit" class="edit-link">EDIT</a><a href="/bookmarks/{{bookmark.id}}/archive" class="archive-link" onclick="return confirm('Archive this bookmark?') && fetch(this.href, {method: 'POST'}).then(() => location.reload())">ARCHIVE</a></p>
    </div>
  </div>
  {% endfor %}
<div class="bookmark-pagination">
  {% if has_prev %}
  <a href="/?offset={{prev_offset}}&limit={{limit}}&q={{search_query|urlencode}}">prev</a>
  {% else %}
  <span class="disabled">prev</span>
  {% endif %}
  
  <span class="page-info">Page {{page_num}} of {{total_pages}} ({{total}} total)</span>
  
  {% if has_next %}
  <a href="/?offset={{next_offset}}&limit={{limit}}&q={{search_query|urlencode}}">next</a>
  {% else %}
  <span class="disabled">next</span>
  {% endif %}
</div>
</div>
{% endblock %}
